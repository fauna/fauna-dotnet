\doxysection{Field\+Info.\+cs}
\hypertarget{_field_info_8cs_source}{}\label{_field_info_8cs_source}\index{Fauna/Mapping/FieldInfo.cs@{Fauna/Mapping/FieldInfo.cs}}
\mbox{\hyperlink{_field_info_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00001}00001\ \textcolor{keyword}{using\ }System.Reflection;}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00002}00002\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_fauna_1_1_serialization}{Fauna.Serialization}};}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00004}00004\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_fauna_1_1_mapping}{Fauna.Mapping}};}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00009}\mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info}{00009}}\ \textcolor{keyword}{public}\ \textcolor{keyword}{sealed}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info}{FieldInfo}}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00010}00010\ \{}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00014}\mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_ad5fb7b40a9de8c19a600dff681838a6c}{00014}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_ad5fb7b40a9de8c19a600dff681838a6c}{Name}}\ \{\ \textcolor{keyword}{get};\ \}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00018}\mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a30eb69d2b57a4511c02f814753079b78}{00018}}\ \ \ \ \ \textcolor{keyword}{public}\ PropertyInfo\ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a30eb69d2b57a4511c02f814753079b78}{Property}}\ \{\ \textcolor{keyword}{get};\ \}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00020}\mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_adda37565a7f35c08c62c6f286e78521c}{00020}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{namespace_fauna_1_1_mapping_a133053254643c723af41bd74167889ae}{FieldType}}\ \mbox{\hyperlink{namespace_fauna_1_1_mapping_a133053254643c723af41bd74167889ae}{FieldType}}\ \{\ \textcolor{keyword}{get};\ \}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00025}\mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a1f281e606344359ec787748ce5c564c9}{00025}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a1f281e606344359ec787748ce5c564c9}{Type}}\ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a1f281e606344359ec787748ce5c564c9}{Type}}\ \{\ \textcolor{keyword}{get};\ \}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00029}\mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a16679416eea0e3d5287c76ac0a23687c}{00029}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a16679416eea0e3d5287c76ac0a23687c}{IsNullable}}\ \{\ \textcolor{keyword}{get};\ \}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00031}00031\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_mapping_context}{MappingContext}}\ \_ctx;}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00032}00032\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{interface_fauna_1_1_serialization_1_1_i_serializer}{ISerializer}}?\ \_serializer;}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00034}00034\ \ \ \ \ \textcolor{keyword}{internal}\ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info}{FieldInfo}}(\mbox{\hyperlink{class_fauna_1_1_mapping_1_1_mapping_context}{MappingContext}}\ ctx,\ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_base_field_attribute}{BaseFieldAttribute}}\ attr,\ PropertyInfo\ prop)}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00035}00035\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00036}00036\ \ \ \ \ \ \ \ \ var\ nullCtx\ =\ \textcolor{keyword}{new}\ NullabilityInfoContext();}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00037}00037\ \ \ \ \ \ \ \ \ var\ nullInfo\ =\ nullCtx.Create(prop);}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00039}00039\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_ad5fb7b40a9de8c19a600dff681838a6c}{Name}}\ =\ attr.Name\ ??\ FieldName.Canonical(prop.Name);}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00040}00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_fauna_1_1_mapping_a133053254643c723af41bd74167889ae}{FieldType}}\ =\ attr.\mbox{\hyperlink{class_fauna_1_1_mapping_1_1_base_field_attribute_aaef046d14f4eb1824d552eea63afedde}{Type}};}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00041}00041\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a30eb69d2b57a4511c02f814753079b78}{Property}}\ =\ prop;}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00042}00042\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a1f281e606344359ec787748ce5c564c9}{Type}}\ =\ prop.PropertyType;}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00043}00043\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a16679416eea0e3d5287c76ac0a23687c}{IsNullable}}\ =\ nullInfo.WriteState\ is\ NullabilityState.Nullable;}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00044}00044\ \ \ \ \ \ \ \ \ \_ctx\ =\ ctx;}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00045}00045\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00047}00047\ \ \ \ \ \textcolor{keyword}{internal}\ \mbox{\hyperlink{interface_fauna_1_1_serialization_1_1_i_serializer}{ISerializer}}\ Serializer}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00048}00048\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00049}00049\ \ \ \ \ \ \ \ \ \textcolor{keyword}{get}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00050}00050\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ lock\ (\_ctx)}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00053}00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_serializer\ is\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00054}00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_serializer\ =\ Serialization.Serializer.Generate(\_ctx,\ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a1f281e606344359ec787748ce5c564c9}{Type}});}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a16679416eea0e3d5287c76ac0a23687c}{IsNullable}}\ \&\&\ (!\_serializer.GetType().IsGenericType\ ||}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\_serializer.GetType().IsGenericType\ \&\&}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00058}00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_serializer.GetType().GetGenericTypeDefinition()\ !=}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ typeof(NullableStructSerializer<>))))}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00060}00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ serType\ =\ typeof(NullableSerializer<>).MakeGenericType(\textcolor{keyword}{new}[]\ \{\ \mbox{\hyperlink{class_fauna_1_1_mapping_1_1_field_info_a1f281e606344359ec787748ce5c564c9}{Type}}\ \});}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ ser\ =\ Activator.CreateInstance(serType,\ \textcolor{keyword}{new}[]\ \{\ \_serializer\ \});}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_serializer\ =\ (\mbox{\hyperlink{interface_fauna_1_1_serialization_1_1_i_serializer}{ISerializer}})ser!;}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_serializer;}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00069}00069\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00070}00070\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_field_info_8cs_source_l00071}00071\ \}}

\end{DoxyCode}
