\doxysection{Exception\+Handler.\+cs}
\hypertarget{_exception_handler_8cs_source}{}\label{_exception_handler_8cs_source}\index{Fauna/Exceptions/ExceptionHandler.cs@{Fauna/Exceptions/ExceptionHandler.cs}}
\mbox{\hyperlink{_exception_handler_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00001}00001\ \textcolor{keyword}{using\ }System.Net;}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00002}00002\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_fauna_1_1_core}{Fauna.Core}};}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00003}00003\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_fauna_1_1_mapping}{Fauna.Mapping}};}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00005}00005\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_fauna_1_1_exceptions}{Fauna.Exceptions}};}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00007}00007\ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{class\ }ExceptionHandler}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00008}00008\ \{}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00009}00009\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ Exception\ FromQueryFailure(\mbox{\hyperlink{class_fauna_1_1_mapping_1_1_mapping_context}{MappingContext}}\ ctx,\ \mbox{\hyperlink{class_fauna_1_1_core_1_1_query_failure}{QueryFailure}}\ f)}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00010}00010\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00011}00011\ \ \ \ \ \ \ \ \ var\ msg\ =}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00012}00012\ \ \ \ \ \ \ \ \ \ \ \ \ \$\textcolor{stringliteral}{"{}\{f.StatusCode\}\ (\{f.ErrorCode\}):\ \{f.Message\}\{(f.Summary\ is\ \{\ Length:\ >\ 0\ \}\ ?\ "{}}\(\backslash\)n-\/-\/-\/\(\backslash\)n\textcolor{stringliteral}{"{}\ +\ f.Summary\ :\ "{}}\textcolor{stringliteral}{"{})\}"{}};}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00014}00014\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ f.ErrorCode\ \textcolor{keywordflow}{switch}}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00015}00015\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00016}00016\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}abort"{}}\ =>\ \textcolor{keyword}{new}\ AbortException(msg,\ f,\ ctx),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00017}00017\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}bad\_gateway"{}}\ =>\ \textcolor{keyword}{new}\ BadGatewayException(msg,\ f),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00018}00018\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}contended\_transaction"{}}\ =>\ \textcolor{keyword}{new}\ ContendedTransactionException(msg,\ f),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00019}00019\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}forbidden"{}}\ =>\ \textcolor{keyword}{new}\ AuthorizationException(msg,\ f),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00020}00020\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}internal\_error"{}}\ =>\ \textcolor{keyword}{new}\ ServiceException(msg,\ f),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00021}00021\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}invalid\_query"{}}\ =>\ \textcolor{keyword}{new}\ QueryCheckException(msg,\ f),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00022}00022\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}invalid\_request"{}}\ =>\ \textcolor{keyword}{new}\ InvalidRequestException(msg,\ f),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00023}00023\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}limit\_exceeded"{}}\ =>\ \textcolor{keyword}{new}\ ThrottlingException(msg,\ f),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00024}00024\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}time\_out"{}}\ =>\ \textcolor{keyword}{new}\ QueryTimeoutException(msg,\ f),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00025}00025\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}gateway\_timeout"{}}\ =>\ \textcolor{keyword}{new}\ NetworkException(msg,\ f.\mbox{\hyperlink{class_fauna_1_1_core_1_1_query_failure_abb1d293cd1f0362b70f7b5759170ba05}{StatusCode}},\ f.\mbox{\hyperlink{class_fauna_1_1_core_1_1_query_failure_a240736a9073234b2b13c6f4a616bc7d6}{Message}}),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00026}00026\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}unauthorized"{}}\ =>\ \textcolor{keyword}{new}\ AuthenticationException(msg,\ f),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00027}00027\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}constraint\_failure"{}}\ =>\ \textcolor{keyword}{new}\ ConstraintFailureException(msg,\ f),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00028}00028\ }
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00029}00029\ \ \ \ \ \ \ \ \ \ \ \ \ \_\ =>\ \textcolor{keyword}{new}\ QueryRuntimeException(msg,\ f)}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00030}00030\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00031}00031\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00034}00034\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ Exception\ FromRawResponse(\textcolor{keywordtype}{string}\ body,\ HttpResponseMessage\ r)}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00035}00035\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00036}00036\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (r.StatusCode\ is\ >=\ HttpStatusCode.OK\ and\ <=\ (HttpStatusCode)299)}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00037}00037\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00038}00038\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ should\ never\ get\ here,\ but\ if\ we\ do\ it's\ outside\ of\ the\ expected\ wire\ protocol.}}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ ProtocolException(\textcolor{stringliteral}{"{}Malformed\ response."{}},\ r.StatusCode,\ body);}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00040}00040\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00042}00042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ r.StatusCode\ \textcolor{keywordflow}{switch}}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00043}00043\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00044}00044\ \ \ \ \ \ \ \ \ \ \ \ \ HttpStatusCode.TooManyRequests\ =>\ \textcolor{keyword}{new}\ ThrottlingException(}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00045}00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$\textcolor{stringliteral}{"{}\{r.StatusCode\}:\ \{r.ReasonPhrase\ ??\ "{}}Too\ many\ requests.\textcolor{stringliteral}{"{}\}"{}}),}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00046}00046\ \ \ \ \ \ \ \ \ \ \ \ \ \_\ =>\ \textcolor{keyword}{new}\ FaunaException(\$\textcolor{stringliteral}{"{}\{r.StatusCode\}:\ \{r.ReasonPhrase\}"{}})}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00047}00047\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00048}00048\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_exception_handler_8cs_source_l00049}00049\ \}}

\end{DoxyCode}
